!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.domador=t()}}(function(){return function t(e,i,n){function s(o,a){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var p=i[o]={exports:{}};e[o][0].call(p.exports,function(t){var i=e[o][1][t];return s(i?i:t)},p,p.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e){"use strict";function i(t,e){return t[e]=new RegExp(e,"g"),t}function n(t,e){return new Array(e+1).join(t)}function s(t,e){return n(" ",e)+t}function r(t){return t.trim?t.trim():t.replace(g,"")}function o(t,e,i){var n=void 0===i||i;return n||"function"!=typeof t.getAttribute?t[e]||"":t.getAttribute(e)||""}function a(t,e,i){var n=void 0===i||i;return n||"function"!=typeof t.hasAttribute?t.hasOwnProperty(e):t.hasAttribute(e)}function h(t){var e,i,n,s,r=!0,a=o(t,"style",!1),h=null!=a&&"function"==typeof a.match?a.match(T):void 0;if(null!=h)for(i=0;i<h.length;i++)n=h[i],r=!m.test(n);if(r&&"function"==typeof b.getComputedStyle)try{a=b.getComputedStyle(t,null),"function"==typeof(null!=a?a.getPropertyValue:void 0)&&(e=a.getPropertyValue("display"),s=a.getPropertyValue("visibility"),r="none"!==e&&"hidden"!==s)}catch(u){}return r}function u(t,e){function i(t,e,i){return i?e+"#":t}var n,s=-1!==O.indexOf(e)||"BLOCKQUOTE"===e;t=t.replace(/\n([ \t]*\n)+/g,"\n"),t=t.replace(/\n[ \t]+/g,"\n"),t=t.replace(/[ \t]+/g," ");for(n in d)t=t.replace(E[n],d[n]);return t=t.replace(/(\s*)\\#/g,s?i:"$1#")}function p(t){return t.replace(/`/g,"\\`")}function c(){}function l(t,e){return new f(t,e).parse()}function f(t,e){this.html=null!=t?t:"",this.options=e||{},this.atLeft=this.noTrailingWhitespace=this.atP=!0,this.buffer="",this.exceptions=[],this.order=1,this.listDepth=0,this.inCode=this.inPre=this.inOrderedList=!1,this.last=null,this.left="\n",this.links=[],this.linkMap={},this.unhandled={},void 0===this.options.absolute&&(this.options.absolute=!1),void 0===this.options.fencing&&(this.options.fencing=!1),void 0===this.options.fencinglanguage&&(this.options.fencinglanguage=c),void 0===this.options.transform&&(this.options.transform=c)}var d={"\\\\":"\\\\","\\[":"\\[","\\]":"\\]",">":"\\>",_:"\\_","\\*":"\\*","`":"\\`","#":"\\#","([0-9])\\.(\\s|$)":"$1\\.$2","©":"(c)","®":"(r)","™":"(tm)"," ":" ","·":"\\*"," ":" "," ":" "," ":" ","‘":"'","’":"'","“":'"',"”":'"',"…":"...","–":"--","—":"---"},E=Object.keys(d).reduce(i,{}),g=/^\s+|\s+$/g,T=/(display|visibility)\s*:\s*[a-z]+/gi,m=/(none|hidden)\s*$/i,L=/^H([1-6])$/,y=["APPLET","AREA","AUDIO","BUTTON","CANVAS","DATALIST","EMBED","HEAD","INPUT","MAP","MENU","METER","NOFRAMES","NOSCRIPT","OBJECT","OPTGROUP","OPTION","PARAM","PROGRESS","RP","RT","RUBY","SCRIPT","SELECT","STYLE","TEXTAREA","TITLE","VIDEO"],O=["ADDRESS","ARTICLE","ASIDE","DIV","FIELDSET","FOOTER","HEADER","NAV","P","SECTION"],b=t("./virtualWindowContext");f.prototype.append=function(t){return null!=this.last&&(this.buffer+=this.last),this.last=t},f.prototype.br=function(){return this.append("  "+this.left),this.atLeft=this.noTrailingWhitespace=!0},f.prototype.code=function(){var t;return t=this.inCode,this.inCode=!0,function(e){return function(){return e.inCode=t}}(this)},f.prototype.li=function(){var t;return t=this.inOrderedList?this.order++ +". ":"* ",t=s(t,2*(this.listDepth-1)),this.append(t)},f.prototype.ol=function(){var t,e;return 0===this.listDepth&&this.p(),t=this.inOrderedList,e=this.order,this.inOrderedList=!0,this.order=1,this.listDepth++,function(i){return function(){return i.inOrderedList=t,i.order=e,i.listDepth--}}(this)},f.prototype.output=function(t){return t&&(this.inPre||(t=this.noTrailingWhitespace?t.replace(/^[ \t\n]+/,""):/^[ \t]*\n/.test(t)?t.replace(/^[ \t\n]+/,"\n"):t.replace(/^[ \t]+/," ")),""!==t)?(this.atP=/\n\n$/.test(t),this.atLeft=/\n$/.test(t),this.noTrailingWhitespace=/[ \t\n]$/.test(t),this.append(t.replace(/\n/g,this.left))):void 0},f.prototype.outputLater=function(t){return function(e){return function(){return e.output(t)}}(this)},f.prototype.p=function(){return this.atP?void 0:(this.append(this.startingBlockquote?"\n":this.left),this.atLeft||(this.append(this.left),this.atLeft=!0),this.noTrailingWhitespace=this.atP=!0)},f.prototype.parse=function(){var t,e,i,n;if(this.buffer="",!this.html)return this.buffer;if("string"==typeof this.html?(t=b.document.createElement("div"),t.innerHTML=this.html):t=this.html,this.process(t),this.links.length){for(;this.lastElement.parentElement!==t&&"BLOCKQUOTE"!==this.lastElement.tagName;)this.lastElement=this.lastElement.parentElement;for("BLOCKQUOTE"!==this.lastElement.tagName&&this.append("\n\n"),n=this.links,e=0;e<n.length;e++)i=n[e],i&&this.append("["+(e+1)+"]: "+i+"\n")}return this.append(""),this.buffer=r(this.buffer)},f.prototype.pre=function(){var t;return t=this.inPre,this.inPre=!0,function(e){return function(){return e.inPre=t}}(this)},f.prototype.htmlTag=function(t){return this.output("<"+t+">"),this.outputLater("</"+t+">")},f.prototype.process=function(t){var e,i,s,r,c,l,f,d,E,g,T;if(h(t)){if(t.nodeType===b.Node.TEXT_NODE){if(0===t.nodeValue.replace(/\n/g,"").length)return;return this.output(this.inPre?t.nodeValue:this.inCode?p(t.nodeValue):u(t.nodeValue,t.parentElement.tagName))}if(t.nodeType===b.Node.ELEMENT_NODE){this.lastElement=t;var m=this.options.transform(t);if(void 0!==m)return this.output(m);if(-1===y.indexOf(t.tagName)){switch(t.tagName){case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":this.p(),this.output(n("#",parseInt(t.tagName.match(L)[1]))+" ");break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"DIV":case"FIELDSET":case"FOOTER":case"HEADER":case"NAV":case"P":case"SECTION":this.p();break;case"BODY":case"FORM":break;case"DETAILS":if(this.p(),!a(t,"open",!1))return g=t.getElementsByTagName("summary")[0],void(g&&this.process(g));break;case"BR":this.br();break;case"HR":this.p(),this.output("---------"),this.p();break;case"CITE":case"DFN":case"EM":case"I":case"U":case"VAR":this.output("_"),this.noTrailingWhitespace=!0,e=this.outputLater("_");break;case"DT":case"B":case"STRONG":"DT"===t.tagName&&this.p(),this.output("**"),this.noTrailingWhitespace=!0,e=this.outputLater("**");break;case"Q":this.output('"'),this.noTrailingWhitespace=!0,e=this.outputLater('"');break;case"OL":e=this.ol();break;case"UL":e=this.ul();break;case"LI":this.replaceLeft("\n"),this.li();break;case"PRE":this.options.fencing?(this.append("\n\n"),this.output(["```","\n"].join(this.options.fencinglanguage(t)||"")),i=this.pre(),s=this.outputLater("\n```")):(i=this.pushLeft("    "),s=this.pre()),e=function(){return i(),s()};break;case"CODE":case"SAMP":if(this.inPre)break;this.output("`"),i=this.code(),s=this.outputLater("`"),e=function(){return i(),s()};break;case"BLOCKQUOTE":case"DD":this.startingBlockquote=!0,e=this.pushLeft("> "),this.startingBlockquote=!1;break;case"KBD":e=this.htmlTag("kbd");break;case"A":if(c=o(t,"href",this.options.absolute),!c)break;T=o(t,"title"),T&&(c+=' "'+T+'"'),E=this.options.inline?"("+c+")":"["+(null!=(r=this.linkMap)[c]?r[c]:r[c]=this.links.push(c))+"]",this.output("["),this.noTrailingWhitespace=!0,e=this.outputLater("]"+E);break;case"IMG":if(d=o(t,"src",this.options.absolute),!d)break;return void this.output("!["+o(t,"alt")+"]("+d+")");case"FRAME":case"IFRAME":try{(null!=(f=t.contentDocument)?f.documentElement:void 0)&&this.process(t.contentDocument.documentElement)}catch(O){}return;case"TR":e=this.p}for(l=0;l<t.childNodes.length;l++)this.process(t.childNodes[l]);return e?e.call(this):void 0}}}},f.prototype.pushLeft=function(t){var e;return e=this.left,this.left+=t,this.atP?this.append(t):this.p(),function(t){return function(){return t.left=e,t.atLeft=t.atP=!1,t.p()}}(this)},f.prototype.replaceLeft=function(t){return this.atLeft?this.last?this.last=this.last.replace(/[ ]{2,4}$/,t):void 0:(this.append(this.left.replace(/[ ]{2,4}$/,t)),this.atLeft=this.noTrailingWhitespace=this.atP=!0)},f.prototype.ul=function(){var t,e;return 0===this.listDepth&&this.p(),t=this.inOrderedList,e=this.order,this.inOrderedList=!1,this.order=1,this.listDepth++,function(i){return function(){return i.inOrderedList=t,i.order=e,i.listDepth--}}(this)},e.exports=l},{"./virtualWindowContext":2}],2:[function(t,e){"use strict";e.exports=window},{}]},{},[1])(1)});
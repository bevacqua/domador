!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.domador=t()}}(function(){return function t(e,i,n){function s(o,a){if(!i[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var p=i[o]={exports:{}};e[o][0].call(p.exports,function(t){var i=e[o][1][t];return s(i?i:t)},p,p.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){"use strict";function n(t,e){return t[e]=new RegExp(e,"g"),t}function s(t,e){return new Array(e+1).join(t)}function r(t,e){return s(" ",e)+t}function o(t){return t.trim?t.trim():t.replace(T,"")}function a(t,e,i){var n=void 0===i||i;return n||"function"!=typeof t.getAttribute?t[e]||"":t.getAttribute(e)||""}function u(t,e,i){var n=void 0===i||i;return n||"function"!=typeof t.hasAttribute?t.hasOwnProperty(e):t.hasAttribute(e)}function h(t){var e,i,n,s,r=!0,o=a(t,"style",!1),u=null!=o&&"function"==typeof o.match?o.match(m):void 0;if(null!=u)for(i=0;i<u.length;i++)n=u[i],r=!L.test(n);if(r&&"function"==typeof D.getComputedStyle)try{o=D.getComputedStyle(t,null),"function"==typeof(null!=o?o.getPropertyValue:void 0)&&(e=o.getPropertyValue("display"),s=o.getPropertyValue("visibility"),r="none"!==e&&"hidden"!==s)}catch(h){}return r}function p(t,e){function i(t,e,i){return i?e+"#":t}var n,s=-1!==b.indexOf(e)||"BLOCKQUOTE"===e;t=t.replace(/\n([ \t]*\n)+/g,"\n"),t=t.replace(/\n[ \t]+/g,"\n"),t=t.replace(/[ \t]+/g," ");for(n in E)t=t.replace(g[n],E[n]);return t=t.replace(/(\s*)\\#/g,s?i:"$1#")}function c(t){return t.replace(/`/g,"\\`")}function l(){}function f(t,e){return new d(t,e).parse()}function d(t,e){this.html=null!=t?t:"",this.options=e||{},this.atLeft=this.noTrailingWhitespace=this.atP=!0,this.buffer="",this.exceptions=[],this.order=1,this.listDepth=0,this.inCode=this.inPre=this.inOrderedList=!1,this.last=null,this.left="\n",this.links=[],this.linkMap={},this.unhandled={},void 0===this.options.absolute&&(this.options.absolute=!1),void 0===this.options.fencing&&(this.options.fencing=!1),void 0===this.options.fencinglanguage&&(this.options.fencinglanguage=l),void 0===this.options.transform&&(this.options.transform=l)}var E={"\\\\":"\\\\","\\[":"\\[","\\]":"\\]",">":"\\>",_:"\\_","\\*":"\\*","`":"\\`","#":"\\#","([0-9])\\.(\\s|$)":"$1\\.$2","©":"(c)","®":"(r)","™":"(tm)"," ":" ","·":"\\*"," ":" "," ":" "," ":" ","‘":"'","’":"'","“":'"',"”":'"',"…":"...","–":"--","—":"---"},g=Object.keys(E).reduce(n,{}),T=/^\s+|\s+$/g,m=/(display|visibility)\s*:\s*[a-z]+/gi,L=/(none|hidden)\s*$/i,O=/^H([1-6])$/,y=["APPLET","AREA","AUDIO","BUTTON","CANVAS","DATALIST","EMBED","HEAD","INPUT","MAP","MENU","METER","NOFRAMES","NOSCRIPT","OBJECT","OPTGROUP","OPTION","PARAM","PROGRESS","RP","RT","RUBY","SCRIPT","SELECT","STYLE","TEXTAREA","TITLE","VIDEO"],b=["ADDRESS","ARTICLE","ASIDE","DIV","FIELDSET","FOOTER","HEADER","NAV","P","SECTION"],D=t("./virtualWindowContext");d.prototype.append=function(t){return null!=this.last&&(this.buffer+=this.last),this.last=t},d.prototype.br=function(){return this.append("  "+this.left),this.atLeft=this.noTrailingWhitespace=!0},d.prototype.code=function(){var t;return t=this.inCode,this.inCode=!0,function(e){return function(){return e.inCode=t}}(this)},d.prototype.li=function(){var t;return t=this.inOrderedList?this.order++ +". ":"* ",t=r(t,2*(this.listDepth-1)),this.append(t)},d.prototype.ol=function(){var t,e;return 0===this.listDepth&&this.p(),t=this.inOrderedList,e=this.order,this.inOrderedList=!0,this.order=1,this.listDepth++,function(i){return function(){return i.inOrderedList=t,i.order=e,i.listDepth--}}(this)},d.prototype.output=function(t){return t&&(this.inPre||(t=this.noTrailingWhitespace?t.replace(/^[ \t\n]+/,""):/^[ \t]*\n/.test(t)?t.replace(/^[ \t\n]+/,"\n"):t.replace(/^[ \t]+/," ")),""!==t)?(this.atP=/\n\n$/.test(t),this.atLeft=/\n$/.test(t),this.noTrailingWhitespace=/[ \t\n]$/.test(t),this.append(t.replace(/\n/g,this.left))):void 0},d.prototype.outputLater=function(t){return function(e){return function(){return e.output(t)}}(this)},d.prototype.p=function(){return this.atP?void 0:(this.startingBlockquote?this.append("\n"):this.append(this.left),this.atLeft||(this.append(this.left),this.atLeft=!0),this.noTrailingWhitespace=this.atP=!0)},d.prototype.parse=function(){var t,e,i,n;if(this.buffer="",!this.html)return this.buffer;if("string"==typeof this.html?(t=D.document.createElement("div"),t.innerHTML=this.html):t=this.html,this.process(t),this.links.length){for(;this.lastElement.parentElement!==t&&"BLOCKQUOTE"!==this.lastElement.tagName;)this.lastElement=this.lastElement.parentElement;for("BLOCKQUOTE"!==this.lastElement.tagName&&this.append("\n\n"),n=this.links,e=0;e<n.length;e++)i=n[e],i&&this.append("["+(e+1)+"]: "+i+"\n")}return this.append(""),this.buffer=o(this.buffer)},d.prototype.pre=function(){var t;return t=this.inPre,this.inPre=!0,function(e){return function(){return e.inPre=t}}(this)},d.prototype.htmlTag=function(t){return this.output("<"+t+">"),this.outputLater("</"+t+">")},d.prototype.process=function(t){var e,i,n,r,o,l,f,d,E,g;if(h(t)){if(t.nodeType===D.Node.TEXT_NODE){if(0===t.nodeValue.replace(/\n/g,"").length)return;return this.inPre?this.output(t.nodeValue):this.inCode?this.output(c(t.nodeValue)):this.output(p(t.nodeValue,t.parentElement&&t.parentElement.tagName))}if(t.nodeType===D.Node.ELEMENT_NODE){this.lastElement=t;var T=this.options.transform(t);if(void 0!==T)return this.output(T);if(-1===y.indexOf(t.tagName)){switch(t.tagName){case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":this.p(),this.output(s("#",parseInt(t.tagName.match(O)[1]))+" ");break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"DIV":case"FIELDSET":case"FOOTER":case"HEADER":case"NAV":case"P":case"SECTION":this.p();break;case"BODY":case"FORM":break;case"DETAILS":if(this.p(),!u(t,"open",!1))return E=t.getElementsByTagName("summary")[0],void(E&&this.process(E));break;case"BR":this.br();break;case"HR":this.p(),this.output("---------"),this.p();break;case"CITE":case"DFN":case"EM":case"I":case"U":case"VAR":this.output("_"),this.noTrailingWhitespace=!0,e=this.outputLater("_");break;case"MARK":this.output("<mark>"),e=this.outputLater("</mark>");break;case"DT":case"B":case"STRONG":"DT"===t.tagName&&this.p(),this.output("**"),this.noTrailingWhitespace=!0,e=this.outputLater("**");break;case"Q":this.output('"'),this.noTrailingWhitespace=!0,e=this.outputLater('"');break;case"OL":e=this.ol();break;case"UL":e=this.ul();break;case"LI":this.replaceLeft("\n"),this.li();break;case"PRE":this.options.fencing?(this.append("\n\n"),this.output(["```","\n"].join(this.options.fencinglanguage(t)||"")),i=this.pre(),n=this.outputLater("\n```")):(i=this.pushLeft("    "),n=this.pre()),e=function(){return i(),n()};break;case"CODE":case"SAMP":if(this.inPre)break;this.output("`"),i=this.code(),n=this.outputLater("`"),e=function(){return i(),n()};break;case"BLOCKQUOTE":case"DD":this.startingBlockquote=!0,e=this.pushLeft("> "),this.startingBlockquote=!1;break;case"KBD":e=this.htmlTag("kbd");break;case"A":case"IMG":if(o=a(t,"A"===t.tagName?"href":"src",this.options.absolute),!o)break;if(g=a(t,"title"),g&&(o+=' "'+g+'"'),d=this.options.inline?"("+o+")":"["+(null!=(r=this.linkMap)[o]?r[o]:r[o]=this.links.push(o))+"]","IMG"===t.tagName)return void this.output("!["+a(t,"alt")+"]"+d);this.output("["),this.noTrailingWhitespace=!0,e=this.outputLater("]"+d);break;case"FRAME":case"IFRAME":try{(null!=(f=t.contentDocument)?f.documentElement:void 0)&&this.process(t.contentDocument.documentElement)}catch(m){}return;case"TR":e=this.p}for(l=0;l<t.childNodes.length;l++)this.process(t.childNodes[l]);return e?e.call(this):void 0}}}},d.prototype.pushLeft=function(t){var e;return e=this.left,this.left+=t,this.atP?this.append(t):this.p(),function(t){return function(){return t.left=e,t.atLeft=t.atP=!1,t.p()}}(this)},d.prototype.replaceLeft=function(t){return this.atLeft?this.last?this.last=this.last.replace(/[ ]{2,4}$/,t):void 0:(this.append(this.left.replace(/[ ]{2,4}$/,t)),this.atLeft=this.noTrailingWhitespace=this.atP=!0)},d.prototype.ul=function(){var t,e;return 0===this.listDepth&&this.p(),t=this.inOrderedList,e=this.order,this.inOrderedList=!1,this.order=1,this.listDepth++,function(i){return function(){return i.inOrderedList=t,i.order=e,i.listDepth--}}(this)},e.exports=f},{"./virtualWindowContext":2}],2:[function(t,e,i){"use strict";e.exports=window,window.Node||(window.Node={ELEMENT_NODE:1,TEXT_NODE:3})},{}]},{},[1])(1)});
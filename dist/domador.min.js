!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.domador=t()}}(function(){return function t(e,i,n){function s(o,a){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var p=i[o]={exports:{}};e[o][0].call(p.exports,function(t){var i=e[o][1][t];return s(i?i:t)},p,p.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){"use strict";function n(t,e){return t[e]=new RegExp(e,"g"),t}function s(t,e){return new Array(e+1).join(t)}function r(t,e){return s(" ",e)+t}function o(t){return t.trim?t.trim():t.replace(E,"")}function a(t,e,i){var n=void 0===i||i;return n||"function"!=typeof t.getAttribute?t[e]||"":t.getAttribute(e)||""}function h(t,e,i){var n=void 0===i||i;return n||"function"!=typeof t.hasAttribute?t.hasOwnProperty(e):t.hasAttribute(e)}function u(t,e){function i(t,e,i){return i?e+"#":t}var n,s=-1!==L.indexOf(e)||"BLOCKQUOTE"===e;t=t.replace(/\n([ \t]*\n)+/g,"\n"),t=t.replace(/\n[ \t]+/g,"\n"),t=t.replace(/[ \t]+/g," ");for(n in d)t=t.replace(g[n],d[n]);return t=t.replace(/(\s*)\\#/g,s?i:"$1#")}function p(t){return t.replace(/`/g,"\\`")}function c(){}function l(t,e){return new f(t,e).parse()}function f(t,e){this.html=null!=t?t:"",this.options=e||{},this.windowContext=O(this.options),this.atLeft=this.noTrailingWhitespace=this.atP=!0,this.buffer=this.childBuffer="",this.exceptions=[],this.order=1,this.listDepth=0,this.inCode=this.inPre=this.inOrderedList=!1,this.last=null,this.left="\n",this.links=[],this.linkMap={},this.unhandled={},void 0===this.options.absolute&&(this.options.absolute=!1),void 0===this.options.fencing&&(this.options.fencing=!1),void 0===this.options.fencinglanguage&&(this.options.fencinglanguage=c),void 0===this.options.transform&&(this.options.transform=c)}t("string.prototype.repeat");var d={"\\\\":"\\\\","\\[":"\\[","\\]":"\\]",">":"\\>",_:"\\_","\\*":"\\*","`":"\\`","#":"\\#","([0-9])\\.(\\s|$)":"$1\\.$2","©":"(c)","®":"(r)","™":"(tm)"," ":" ","·":"\\*"," ":" "," ":" "," ":" ","‘":"'","’":"'","“":'"',"”":'"',"…":"...","–":"--","—":"---"},g=Object.keys(d).reduce(n,{}),E=/^\s+|\s+$/g,T=/(display|visibility)\s*:\s*[a-z]+/gi,m=/(none|hidden)\s*$/i,y=/^H([1-6])$/,b=["APPLET","AREA","AUDIO","BUTTON","CANVAS","DATALIST","EMBED","HEAD","INPUT","MAP","MENU","METER","NOFRAMES","NOSCRIPT","OBJECT","OPTGROUP","OPTION","PARAM","PROGRESS","RP","RT","RUBY","SCRIPT","SELECT","STYLE","TEXTAREA","TITLE","VIDEO"],L=["ADDRESS","ARTICLE","ASIDE","DIV","FIELDSET","FOOTER","HEADER","NAV","P","SECTION"],O=t("./virtualWindowContext");f.prototype.append=function(t){return null!=this.last&&(this.buffer+=this.last),this.childBuffer+=t,this.last=t},f.prototype.br=function(){return this.append("  "+this.left),this.atLeft=this.noTrailingWhitespace=!0},f.prototype.code=function(){var t;return t=this.inCode,this.inCode=!0,function(e){return function(){return e.inCode=t}}(this)},f.prototype.li=function(){var t;return t=this.inOrderedList?this.order++ +". ":"* ",t=r(t,2*(this.listDepth-1)),this.append(t)},f.prototype.td=function(t){return this.noTrailingWhitespace=!1,this.output(" "),this.childBuffer="",this.noTrailingWhitespace=!1,function(){var e=t?0:Math.max(0,this.tableCols[this.tableCol++]-this.childBuffer.length);this.inPre=!0,this.output(" ".repeat(e+1)+"|"),this.inPre=!1,this.noTrailingWhitespace=!0}},f.prototype.ol=function(){var t,e;return 0===this.listDepth&&this.p(),t=this.inOrderedList,e=this.order,this.inOrderedList=!0,this.order=1,this.listDepth++,function(i){return function(){return i.inOrderedList=t,i.order=e,i.listDepth--}}(this)},f.prototype.ul=function(){var t,e;return 0===this.listDepth&&this.p(),t=this.inOrderedList,e=this.order,this.inOrderedList=!1,this.order=1,this.listDepth++,function(i){return function(){return i.inOrderedList=t,i.order=e,i.listDepth--}}(this)},f.prototype.output=function(t){return t&&(this.inPre||(t=this.noTrailingWhitespace?t.replace(/^[ \t\n]+/,""):/^[ \t]*\n/.test(t)?t.replace(/^[ \t\n]+/,"\n"):t.replace(/^[ \t]+/," ")),""!==t)?(this.atP=/\n\n$/.test(t),this.atLeft=/\n$/.test(t),this.noTrailingWhitespace=/[ \t\n]$/.test(t),this.append(t.replace(/\n/g,this.left))):void 0},f.prototype.outputLater=function(t){return function(e){return function(){return e.output(t)}}(this)},f.prototype.p=function(){return this.atP?void 0:(this.startingBlockquote?this.append("\n"):this.append(this.left),this.atLeft||(this.append(this.left),this.atLeft=!0),this.noTrailingWhitespace=this.atP=!0)},f.prototype.parse=function(){var t,e,i,n;if(this.buffer="",!this.html)return this.buffer;if("string"==typeof this.html?(t=this.windowContext.document.createElement("div"),t.innerHTML=this.html):t=this.html,this.process(t),this.links.length){for(;this.lastElement.parentElement!==t&&"BLOCKQUOTE"!==this.lastElement.tagName;)this.lastElement=this.lastElement.parentElement;for("BLOCKQUOTE"!==this.lastElement.tagName&&this.append("\n\n"),n=this.links,e=0;e<n.length;e++)i=n[e],i&&this.append("["+(e+1)+"]: "+i+"\n")}return this.append(""),this.buffer=o(this.buffer)},f.prototype.pre=function(){var t;return t=this.inPre,this.inPre=!0,function(e){return function(){return e.inPre=t}}(this)},f.prototype.htmlTag=function(t){return this.output("<"+t+">"),this.outputLater("</"+t+">")},f.prototype.process=function(t){var e,i,n,r,o,c,l,f,d;if(this.isVisible(t)){if(t.nodeType===this.windowContext.Node.TEXT_NODE){if(0===t.nodeValue.replace(/\n/g,"").length)return;return this.inPre?this.output(t.nodeValue):this.inCode?this.output(p(t.nodeValue)):this.output(u(t.nodeValue,t.parentElement&&t.parentElement.tagName))}if(t.nodeType===this.windowContext.Node.ELEMENT_NODE){this.lastElement=t;var g=this.options.transform(t);if(void 0!==g)return this.output(g);if(-1===b.indexOf(t.tagName)){switch(t.tagName){case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":this.p(),this.output(s("#",parseInt(t.tagName.match(y)[1]))+" ");break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"DIV":case"FIELDSET":case"FOOTER":case"HEADER":case"NAV":case"P":case"SECTION":this.p();break;case"BODY":case"FORM":break;case"DETAILS":if(this.p(),!h(t,"open",!1))return l=t.getElementsByTagName("summary")[0],void(l&&this.process(l));break;case"BR":this.br();break;case"HR":this.p(),this.output("---------"),this.p();break;case"CITE":case"DFN":case"EM":case"I":case"U":case"VAR":this.output("_"),this.noTrailingWhitespace=!0,e=this.outputLater("_");break;case"MARK":this.output("<mark>"),e=this.outputLater("</mark>");break;case"DT":case"B":case"STRONG":"DT"===t.tagName&&this.p(),this.output("**"),this.noTrailingWhitespace=!0,e=this.outputLater("**");break;case"Q":this.output('"'),this.noTrailingWhitespace=!0,e=this.outputLater('"');break;case"OL":e=this.ol();break;case"UL":e=this.ul();break;case"LI":this.replaceLeft("\n"),this.li();break;case"PRE":this.options.fencing?(this.append("\n\n"),this.output(["```","\n"].join(this.options.fencinglanguage(t)||"")),e=[this.pre(),this.outputLater("\n```")]):e=[this.pushLeft("    "),this.pre()];break;case"CODE":case"SAMP":if(this.inPre)break;this.output("`"),e=[this.code(),this.outputLater("`")];break;case"BLOCKQUOTE":case"DD":this.startingBlockquote=!0,e=this.pushLeft("> "),this.startingBlockquote=!1;break;case"KBD":e=this.htmlTag("kbd");break;case"A":case"IMG":if(n=a(t,"A"===t.tagName?"href":"src",this.options.absolute),!n)break;if(f=a(t,"title"),f&&(n+=' "'+f+'"'),c=this.options.inline?"("+n+")":"["+(null!=(i=this.linkMap)[n]?i[n]:i[n]=this.links.push(n))+"]","IMG"===t.tagName)return void this.output("!["+a(t,"alt")+"]"+c);this.output("["),this.noTrailingWhitespace=!0,e=this.outputLater("]"+c);break;case"IFRAME":try{(null!=(o=t.contentDocument)?o.documentElement:void 0)?this.process(t.contentDocument.documentElement):(d=a(t,"src"),d&&this.options.allowFrame&&this.options.allowFrame(d)&&this.output('<iframe src="'+d+'"></iframe>'))}catch(E){}return}for(e=this.tables(t)||e,r=0;r<t.childNodes.length;r++)this.process(t.childNodes[r]);for("function"==typeof e&&(e=[e]);e&&e.length;)e.shift().call(this)}}}},f.prototype.tables=function(t){if(this.options.tables!==!1){var e=t.tagName;return"TABLE"===e?void(this.tableCols=[]):"THEAD"===e?function(){return this.output("|"+this.tableCols.reduce(function(t,e){return t+"-".repeat(e+2)+"|"},""))}:"TH"===e?[function(){this.tableCols.push(this.childBuffer.length)},this.td(!0)]:"TR"===e?(this.tableCol=0,this.output("|"),this.noTrailingWhitespace=!0,function(){this.output("\n"),this.noTrailingWhitespace=!1}):"TD"===e?this.td():void 0}},f.prototype.pushLeft=function(t){var e;return e=this.left,this.left+=t,this.atP?this.append(t):this.p(),function(t){return function(){return t.left=e,t.atLeft=t.atP=!1,t.p()}}(this)},f.prototype.replaceLeft=function(t){return this.atLeft?this.last?this.last=this.last.replace(/[ ]{2,4}$/,t):void 0:(this.append(this.left.replace(/[ ]{2,4}$/,t)),this.atLeft=this.noTrailingWhitespace=this.atP=!0)},f.prototype.isVisible=function(t){var e,i,n,s,r=!0,o=a(t,"style",!1),h=null!=o&&"function"==typeof o.match?o.match(T):void 0;if(null!=h)for(i=0;i<h.length;i++)n=h[i],r=!m.test(n);if(r&&"function"==typeof this.windowContext.getComputedStyle)try{o=this.windowContext.getComputedStyle(t,null),"function"==typeof(null!=o?o.getPropertyValue:void 0)&&(e=o.getPropertyValue("display"),s=o.getPropertyValue("visibility"),r="none"!==e&&"hidden"!==s)}catch(u){}return r},e.exports=l},{"./virtualWindowContext":3,"string.prototype.repeat":2}],2:[function(t,e,i){String.prototype.repeat||!function(){"use strict";var t=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(n){}return i}(),e=function(t){if(null==this)throw TypeError();var e=String(this),i=t?Number(t):0;if(i!=i&&(i=0),0>i||i==1/0)throw RangeError();for(var n="";i;)i%2==1&&(n+=e),i>1&&(e+=e),i>>=1;return n};t?t(String.prototype,"repeat",{value:e,configurable:!0,writable:!0}):String.prototype.repeat=e}()},{}],3:[function(t,e,i){"use strict";function n(){return window}window.Node||(window.Node={ELEMENT_NODE:1,TEXT_NODE:3}),e.exports=n},{}]},{},[1])(1)});
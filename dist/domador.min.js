!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.domador=t()}}(function(){return function t(e,i,n){function s(o,a){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var p=i[o]={exports:{}};e[o][0].call(p.exports,function(t){var i=e[o][1][t];return s(i?i:t)},p,p.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){"use strict";function n(t,e){return t[e]=new RegExp(e,"g"),t}function s(t,e){return new Array(e+1).join(t)}function r(t,e){return s(" ",e)+t}function o(t){return t.trim?t.trim():t.replace(g,"")}function a(t,e,i){var n=void 0===i||i;return n||"function"!=typeof t.getAttribute?t[e]||"":t.getAttribute(e)||""}function h(t,e,i){var n=void 0===i||i;return n||"function"!=typeof t.hasAttribute?t.hasOwnProperty(e):t.hasAttribute(e)}function u(t,e){function i(t,e,i){return i?e+"#":t}var n,s=-1!==L.indexOf(e)||"BLOCKQUOTE"===e;t=t.replace(/\n([ \t]*\n)+/g,"\n"),t=t.replace(/\n[ \t]+/g,"\n"),t=t.replace(/[ \t]+/g," ");for(n in d)t=t.replace(m[n],d[n]);return t=t.replace(/(\s*)\\#/g,s?i:"$1#")}function p(t){return t.replace(/`/g,"\\`")}function l(){}function c(t,e){return new f(t,e).parse()}function f(t,e){function i(t,e){return t[0]-e[0]}this.html=t||"",this.htmlIndex=0,this.options=e||{},this.markers=this.options.markers?this.options.markers.sort(i):[],this.windowContext=b(this.options),this.atLeft=this.noTrailingWhitespace=this.atP=!0,this.buffer=this.childBuffer="",this.exceptions=[],this.order=1,this.listDepth=0,this.inCode=this.inPre=this.inOrderedList=!1,this.last=null,this.left="\n",this.links=[],this.linkMap={},this.unhandled={},void 0===this.options.absolute&&(this.options.absolute=!1),void 0===this.options.fencing&&(this.options.fencing=!1),void 0===this.options.fencinglanguage&&(this.options.fencinglanguage=l),void 0===this.options.transform&&(this.options.transform=l)}t("string.prototype.repeat");var d={"\\\\":"\\\\","\\[":"\\[","\\]":"\\]",">":"\\>",_:"\\_","\\*":"\\*","`":"\\`","#":"\\#","([0-9])\\.(\\s|$)":"$1\\.$2","©":"(c)","®":"(r)","™":"(tm)"," ":" ","·":"\\*"," ":" "," ":" "," ":" ","‘":"'","’":"'","“":'"',"”":'"',"…":"...","–":"--","—":"---"},m=Object.keys(d).reduce(n,{}),g=/^\s+|\s+$/g,E=/(display|visibility)\s*:\s*[a-z]+/gi,T=/(none|hidden)\s*$/i,y=/^H([1-6])$/,v=["APPLET","AREA","AUDIO","BUTTON","CANVAS","DATALIST","EMBED","HEAD","INPUT","MAP","MENU","METER","NOFRAMES","NOSCRIPT","OBJECT","OPTGROUP","OPTION","PARAM","PROGRESS","RP","RT","RUBY","SCRIPT","SELECT","STYLE","TEXTAREA","TITLE","VIDEO"],L=["ADDRESS","ARTICLE","ASIDE","DIV","FIELDSET","FOOTER","HEADER","NAV","P","SECTION"],b=t("./virtualWindowContext");f.prototype.append=function(t){return null!=this.last&&(this.buffer+=this.last),this.childBuffer+=t,this.last=t},f.prototype.br=function(){return this.append("  "+this.left),this.atLeft=this.noTrailingWhitespace=!0},f.prototype.code=function(){var t;return t=this.inCode,this.inCode=!0,function(e){return function(){return e.inCode=t}}(this)},f.prototype.li=function(){var t;return t=this.inOrderedList?this.order++ +". ":"* ",t=r(t,2*(this.listDepth-1)),this.append(t)},f.prototype.td=function(t){return this.noTrailingWhitespace=!1,this.output(" "),this.childBuffer="",this.noTrailingWhitespace=!1,function(){var e=t?0:Math.max(0,this.tableCols[this.tableCol++]-this.childBuffer.length);this.append(" ".repeat(e+1)+"|"),this.noTrailingWhitespace=!0}},f.prototype.ol=function(){var t,e;return 0===this.listDepth&&this.p(),t=this.inOrderedList,e=this.order,this.inOrderedList=!0,this.order=1,this.listDepth++,function(i){return function(){return i.inOrderedList=t,i.order=e,i.listDepth--}}(this)},f.prototype.ul=function(){var t,e;return 0===this.listDepth&&this.p(),t=this.inOrderedList,e=this.order,this.inOrderedList=!1,this.order=1,this.listDepth++,function(i){return function(){return i.inOrderedList=t,i.order=e,i.listDepth--}}(this)},f.prototype.output=function(t){return t&&(this.inPre||(t=this.noTrailingWhitespace?t.replace(/^[ \t\n]+/,""):/^[ \t]*\n/.test(t)?t.replace(/^[ \t\n]+/,"\n"):t.replace(/^[ \t]+/," ")),""!==t)?(this.atP=/\n\n$/.test(t),this.atLeft=/\n$/.test(t),this.noTrailingWhitespace=/[ \t\n]$/.test(t),this.append(t.replace(/\n/g,this.left))):void 0},f.prototype.outputLater=function(t){return function(e){return function(){return e.output(t)}}(this)},f.prototype.p=function(){return this.atP?void 0:(this.startingBlockquote?this.append("\n"):this.append(this.left),this.atLeft||(this.append(this.left),this.atLeft=!0),this.noTrailingWhitespace=this.atP=!0)},f.prototype.parse=function(){var t,e,i,n;if(this.buffer="",!this.html)return this.buffer;if("string"==typeof this.html?(t=this.windowContext.document.createElement("div"),t.innerHTML=this.htmlLeft=this.html):(t=this.html,this.html=this.htmlLeft=t.innerHTML),this.process(t),this.links.length){for(;this.lastElement.parentElement!==t&&"BLOCKQUOTE"!==this.lastElement.tagName;)this.lastElement=this.lastElement.parentElement;for("BLOCKQUOTE"!==this.lastElement.tagName&&this.append("\n\n"),n=this.links,e=0;e<n.length;e++)i=n[e],i&&this.append("["+(e+1)+"]: "+i+"\n")}return this.append(""),this.buffer=o(this.buffer)},f.prototype.pre=function(){var t;return t=this.inPre,this.inPre=!0,function(e){return function(){return e.inPre=t}}(this)},f.prototype.htmlTag=function(t){return this.output("<"+t+">"),this.outputLater("</"+t+">")},f.prototype.advanceHtmlIndex=function(t){if(0!==this.markers.length){var e=new RegExp(t,"ig"),i=e.exec(this.htmlLeft);if(i){var n=e.lastIndex;this.htmlIndex+=n,this.htmlLeft=this.htmlLeft.slice(n)}}},f.prototype.insertMarkers=function(){for(;this.markers.length&&this.markers[0][0]<=this.htmlIndex;)this.append(this.markers.shift()[1])},f.prototype.interleaveMarkers=function(t){for(var e,i,n=0,s=[];this.markers.length&&this.markers[0][0]<=this.htmlIndex+t.length;)e=this.markers.shift(),i=Math.max(0,e[0]-this.htmlIndex),s.push({text:t.slice(n,i)},{marker:e[1]}),n=i;return s.push({text:t.slice(n)}),s},f.prototype.process=function(t){function e(t,e){return function(i){return i.marker?i.marker:t?t(i.text,e):i.text}}var i,n,r,o,l,c,f,d,m,g;if(this.isVisible(t)){if(t.nodeType===this.windowContext.Node.TEXT_NODE){if(0===t.nodeValue.replace(/\n/g,"").length)return;return g=this.interleaveMarkers(t.nodeValue),this.inPre?this.output(g.map(e()).join("")):this.inCode?this.output(g.map(e(p)).join("")):this.output(g.map(e(u,t.parentElement&&t.parentElement.tagName)).join(""))}if(t.nodeType===this.windowContext.Node.ELEMENT_NODE){this.lastElement&&(this.insertMarkers(),this.advanceHtmlIndex("<"+t.tagName),this.advanceHtmlIndex(">")),this.lastElement=t;var E=this.options.transform(t);if(void 0!==E)return this.output(E);if(-1!==v.indexOf(t.tagName))return void this.advanceHtmlIndex("\\/\\s?>");switch(t.tagName){case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":this.p(),this.output(s("#",parseInt(t.tagName.match(y)[1]))+" ");break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"DIV":case"FIELDSET":case"FOOTER":case"HEADER":case"NAV":case"P":case"SECTION":this.p();break;case"BODY":case"FORM":break;case"DETAILS":if(this.p(),!h(t,"open",!1))return f=t.getElementsByTagName("summary")[0],void(f&&this.process(f));break;case"BR":this.br();break;case"HR":this.p(),this.output("---------"),this.p();break;case"CITE":case"DFN":case"EM":case"I":case"U":case"VAR":this.output("_"),this.noTrailingWhitespace=!0,i=this.outputLater("_");break;case"MARK":this.output("<mark>"),i=this.outputLater("</mark>");break;case"DT":case"B":case"STRONG":"DT"===t.tagName&&this.p(),this.output("**"),this.noTrailingWhitespace=!0,i=this.outputLater("**");break;case"Q":this.output('"'),this.noTrailingWhitespace=!0,i=this.outputLater('"');break;case"OL":i=this.ol();break;case"UL":i=this.ul();break;case"LI":this.replaceLeft("\n"),this.li();break;case"PRE":this.options.fencing?(this.append("\n\n"),this.output(["```","\n"].join(this.options.fencinglanguage(t)||"")),i=[this.pre(),this.outputLater("\n```")]):i=[this.pushLeft("    "),this.pre()];break;case"CODE":case"SAMP":if(this.inPre)break;this.output("`"),i=[this.code(),this.outputLater("`")];break;case"BLOCKQUOTE":case"DD":this.startingBlockquote=!0,i=this.pushLeft("> "),this.startingBlockquote=!1;break;case"KBD":i=this.htmlTag("kbd");break;case"A":case"IMG":if(r=a(t,"A"===t.tagName?"href":"src",this.options.absolute),!r)break;if(d=a(t,"title"),d&&(r+=' "'+d+'"'),c=this.options.inline?"("+r+")":"["+(null!=(n=this.linkMap)[r]?n[r]:n[r]=this.links.push(r))+"]","IMG"===t.tagName)return void this.output("!["+a(t,"alt")+"]"+c);this.output("["),this.noTrailingWhitespace=!0,i=this.outputLater("]"+c);break;case"IFRAME":try{(null!=(l=t.contentDocument)?l.documentElement:void 0)?this.process(t.contentDocument.documentElement):(m=a(t,"src"),m&&this.options.allowFrame&&this.options.allowFrame(m)&&this.output('<iframe src="'+m+'"></iframe>'))}catch(T){}return}for(i=this.tables(t)||i,o=0;o<t.childNodes.length;o++)this.process(t.childNodes[o]);for(this.advanceHtmlIndex("<\\s?\\/\\s?"+t.tagName+">"),"function"==typeof i&&(i=[i]);i&&i.length;)i.shift().call(this)}}},f.prototype.tables=function(t){if(this.options.tables!==!1){var e=t.tagName;return"TABLE"===e?void(this.tableCols=[]):"THEAD"===e?function(){function t(t,e){return t+"-".repeat(e+2)+"|"}return this.append("|"+this.tableCols.reduce(t,"")+"\n")}:"TH"===e?[function(){this.tableCols.push(this.childBuffer.length)},this.td(!0)]:"TR"===e?(this.tableCol=0,this.output("|"),this.noTrailingWhitespace=!0,function(){this.append("\n")}):"TD"===e?this.td():void 0}},f.prototype.pushLeft=function(t){var e;return e=this.left,this.left+=t,this.atP?this.append(t):this.p(),function(t){return function(){return t.left=e,t.atLeft=t.atP=!1,t.p()}}(this)},f.prototype.replaceLeft=function(t){return this.atLeft?this.last?this.last=this.last.replace(/[ ]{2,4}$/,t):void 0:(this.append(this.left.replace(/[ ]{2,4}$/,t)),this.atLeft=this.noTrailingWhitespace=this.atP=!0)},f.prototype.isVisible=function(t){var e,i,n,s,r=!0,o=a(t,"style",!1),h=null!=o&&"function"==typeof o.match?o.match(E):void 0;if(null!=h)for(i=0;i<h.length;i++)n=h[i],r=!T.test(n);if(r&&"function"==typeof this.windowContext.getComputedStyle)try{o=this.windowContext.getComputedStyle(t,null),"function"==typeof(null!=o?o.getPropertyValue:void 0)&&(e=o.getPropertyValue("display"),s=o.getPropertyValue("visibility"),r="none"!==e&&"hidden"!==s)}catch(u){}return r},e.exports=c},{"./virtualWindowContext":3,"string.prototype.repeat":2}],2:[function(t,e,i){String.prototype.repeat||!function(){"use strict";var t=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(n){}return i}(),e=function(t){if(null==this)throw TypeError();var e=String(this),i=t?Number(t):0;if(i!=i&&(i=0),0>i||i==1/0)throw RangeError();for(var n="";i;)i%2==1&&(n+=e),i>1&&(e+=e),i>>=1;return n};t?t(String.prototype,"repeat",{value:e,configurable:!0,writable:!0}):String.prototype.repeat=e}()},{}],3:[function(t,e,i){"use strict";function n(){return window}window.Node||(window.Node={ELEMENT_NODE:1,TEXT_NODE:3}),e.exports=n},{}]},{},[1])(1)});